<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SUIVI DES COTISATIONS POUR [ BONNET MARIE CLAIRE ]</title>
  <link rel="icon" type="image/png" href="../icocollecte.png">
  <meta property="og:title" content="SUIVI DES COTISATIONS POUR [ BONNET MARIE CLAIRE ]" />
  <meta property="og:description" content="Suivi des collectes pour Marie Claire. Liste des contributions re√ßues.">
  <meta property="og:image" content="https://raw.githubusercontent.com/asadgery/solidarite/main/qr_code_wave_1200.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="1200" />
  <meta property="og:url" content="https://asadgery.github.io/solidarite/marie-claire/" />
  <meta property="og:type" content="website" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: slideDown 0.6s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    h1 {
      color: #667eea;
      text-align: center;
      font-size: 2em;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    header > p {
      text-align: center;
      margin: 10px 0;
      font-size: 1.1em;
    }

    .qrcodes {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .qrcode {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .qrcode:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    .qrcode span {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .qrcode.wave span:first-child {
      color: #00A6FF;
    }

    .qrcode.mtn span:first-child {
      color: #FFCC00;
    }

    .qrcode.orange span:first-child {
      color: #FF6600;
    }

    .qrcode img {
      width: 80px;
      height: 80px;
      margin-top: 10px;
      border-radius: 10px;
    }

    .indicators {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .indicator {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      color: white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }

    .indicator:hover {
      transform: scale(1.05);
    }

    .indicator span {
      display: block;
      font-size: 0.9em;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .indicator strong {
      display: block;
      font-size: 1.3em;
      font-weight: bold;
    }

    .progress-container {
      background: #e0e0e0;
      border-radius: 50px;
      height: 40px;
      overflow: hidden;
      position: relative;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #FF4500, #FF6347);
      border-radius: 50px;
      transition: width 1s ease, background 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 15px;
      color: white;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .table-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow-x: auto;
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    thead {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.9em;
      letter-spacing: 0.5px;
    }

    tbody tr {
      border-bottom: 1px solid #e0e0e0;
      transition: all 0.3s ease;
      animation: slideIn 0.5s ease-out backwards;
    }

    tbody tr:nth-child(even) {
      background: #f8f9ff;
    }

    tbody tr:hover {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      transform: scale(1.02);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    td {
      padding: 15px;
    }

    td:first-child {
      font-weight: bold;
      color: #667eea;
      font-size: 1.1em;
    }

    td:nth-child(2) {
      font-weight: 600;
    }

    td:nth-child(3) {
      color: #32CD32;
      font-weight: 600;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: white;
      font-size: 1.2em;
      font-weight: 600;
      margin-top: 30px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.5em;
      }

      .indicators {
        grid-template-columns: 1fr;
      }

      table {
        font-size: 0.9em;
      }

      th, td {
        padding: 10px 5px;
      }
    }

    @keyframes pulse-button {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(255, 215, 0, 0.5);
      }
    }
    
    #celebration-btn:hover {
      transform: scale(1.1) rotate(-3deg);
      box-shadow: 0 15px 50px rgba(255, 215, 0, 0.7);
    }
  </style>
</head>
<body>
  <header>
    <h1>üéØ SUIVI DES COTISATIONS POUR [ BONNET MARIE CLAIRE ]</h1>
    <p>Un geste pour sauver une vie.</p>
    <p><b>Num√©ros : Wave/MTN (+225) 0505637361 | Orange (+225) 0749052678</b></p>

    <div class="qrcodes">
        <div class="qrcode wave">
            <span>üíô Wave</span>
            <span>05 05 63 73 61</span>
            <a href="wave://capture/scan">
              <img src="../qr_code_wave_80x80.jpg" alt="QR Code Wave">
            </a> 
        </div>
        <div class="qrcode mtn">
            <span>üíõ MTN MoMo</span>
            <span>05 05 63 73 61</span>
            <a href="tel:*133%23">
              <img src="../qr_code_mtn_80x80.jpg" alt="QR Code MTN">
            </a>            
        </div>
        <div class="qrcode orange">
            <span>üß° Orange Money</span>
            <span>07 49 05 26 78</span>
            <a href="tel:%23144*1%23">
              <img src="../qr_code_orange_80x80.jpg" alt="QR Code Orange">
            </a>            
        </div>
    </div>
    
    <div class="indicators">
      <div class="indicator objectif">
        <span>üéØ Objectif<br>(Global)</span>
        <strong id="objectif">5 000 000 FCFA</strong>
      </div>
      <div class="indicator total-recu">
        <span>üí∞ Total re√ßu<br>(Pr√©pa Techno promo 2029)</span>
        <strong id="totalRecu">0 FCFA</strong>
      </div>
      <div class="indicator total-recu">
        <span>üí∞ Autres contrib.<br>(Famille & Autres ami/es)</span>
        <strong id="totalAutreContrib">0 FCFA</strong>
      </div>
      <div class="indicator reste">
        <span>üìä Reste √† collecter<br>(Global)</span>
        <strong id="reste">5 000 000 FCFA</strong>
      </div>
      <div class="indicator date-limite">
        <span>‚è∞ Date limite<br>(Global)</span>
        <strong>15/02/2026</strong>
      </div>
    </div>

    <div class="progress-container">
      <div class="progress-bar" id="progress-bar">0%</div>
    </div>
	
  </header>
  
  <section class="table-container">
    <h2 id="contributionsDose3-title" style="color: #667eea; margin-bottom: 10px;">üìã Dose 3 - <span id="nombreContributeurs3">0</span> Contributeurs, 26/01/2026 - Aujourd'hui</h2>
	
    <div class="indicators">   
      <div class="indicator objectif">
        <span>üéØ Objectif<br>(Dose 3)</span>
        <strong id="objectifDose3">1 600 000 FCFA</strong>
      </div>
      <div class="indicator total-recu">
        <span>üí∞ Total disponible<br>(Dose 3)</span>
        <strong id="totalRecuDose3">0 FCFA</strong>
      </div>
      <div class="indicator reste">
        <span>üìä Reste √† collecter<br>(Dose 3)</span>
        <strong id="resteACollecterDose3">1 600 000 FCFA</strong>
      </div>
      <div class="indicator date-limite">
        <span>‚è∞ Date limite<br>(Dose 3)</span>
        <strong>15/02/2026</strong>
      </div>
    </div>
	
    <table id="contributionsDose3">
      <thead>
        <tr>
          <th>N¬∞</th>
          <th>Nom</th>
          <th>Montant vers√© (FCFA)</th>
          <th>Mode de paiement</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="table-container">
    <h2 id="contributionsDose2-title" style="color: #667eea; margin-bottom: 10px;">üìã Dose 2 - <span id="nombreContributeurs2">0</span> Contributeurs, 07/01/2026 - 25/01/2026</h2>
	
	  <div class="indicators">   
		<div class="indicator objectif">
		  <span>üéØ Objectif<br>(Dose 2)</span>
		  <strong id="objectifDose2">1 600 000 FCFA</strong>
		</div>
		<div class="indicator total-recu">
		  <span>üí∞ Total disponible<br>(Dose 2)</span>
		  <strong id="totalRecuDose2">0 FCFA</strong>
		</div>
		<div class="indicator reste">
		  <span>üìä Reste √† collecter<br>(Dose 2)</span>
		  <strong id="resteACollecterDose2">1 600 000 FCFA</strong>
		</div>
		<div class="indicator date-limite">
		  <span>‚è∞ Date limite<br>(Dose 2)</span>
		  <strong>28/01/2026</strong>
		</div>
	  </div>
  
    <table id="contributionsDose2">
      <thead>
        <tr>
          <th>N¬∞</th>
          <th>Nom</th>
          <th>Montant vers√© (FCFA)</th>
          <th>Mode de paiement</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
  
  <section class="table-container">
    <h2 style="color: #667eea; margin-bottom: 10px;">üìã Dose 1 - <span id="nombreContributeurs1">0</span> Contributeurs, 14/12/2025 au 06/01/2025</h2>
	
	<div class="indicators">   
    <div class="indicator objectif">
      <span>üéØ Objectif<br>(Dose 1)</span>
      <strong id="objectifDose1">1 600 000 FCFA</strong>
    </div>
    <div class="indicator total-recu">
      <span>üí∞ Total disponible<br>(Dose 1)</span>
      <strong id="totalRecuDose1">0 FCFA</strong>
    </div>
    <div class="indicator reste">
      <span>üìä Reste √† collecter<br>(Dose 1)</span>
      <strong id="resteACollecterDose1">1 600 000 FCFA</strong>
    </div>
    <div class="indicator date-limite">
      <span>‚è∞ Date limite<br>(Dose 1)</span>
      <strong>07/01/2026</strong>
    </div>
  </div>
  
    <table id="contributionsDose1">
      <thead>
        <tr>
          <th>N¬∞</th>
          <th>Nom</th>
          <th>Montant vers√© (FCFA)</th>
          <th>Mode de paiement</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <footer>
    <p>üôè Merci pour votre solidarit√© et votre soutien !</p>
    <button id="celebration-btn" style="
      margin-top: 20px;
      padding: 20px 40px;
      font-size: 1.5rem;
      font-weight: bold;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #333;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      animation: pulse-button 2s ease-in-out infinite;
    " onclick="window.location.href='index.html'">
      üéâ Infos ! üéâ
    </button>
  </footer>

  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS12j5YSQwTrddBzFQ_nR_OgMKH2WmJhedtUDT1EEmP1JhGIGRNZeOS6nWfcvZul0g09_X7XrAXNTKG/pub?output=csv';

    function formatNumber(num) {
      return num.toLocaleString('fr-FR');
    }

    async function fetchData() {
      try {
        const res = await fetch(csvUrl);
        const text = await res.text();
        const rows = text.split('\n').slice(1).filter(r => r.trim());

        // Objectifs
        const objectif = 5000000;
        const objectifDose1 = 1600000;
        const objectifDose2 = 1600000;
        const objectifDose3 = 1600000;

        // Initialisation des totaux
        let totalPromo2029 = 0;
        let totalAutre = 0;
        let totalDose1 = 0;
        let totalDose2 = 0;
        let totalDose3 = 0;

        // Arrays pour stocker les contributions par dose
        const contributionsDose1 = [];
        const contributionsDose2 = [];
        const contributionsDose3 = [];

        // Parser les donn√©es CSV
        rows.forEach(row => {
			if (!row.trim()) return;
          const cols = row.split(',').map(c => c.trim().replace(/^"|"$/g, ''));
          
          if (cols.length >= 5) {
            const nom = cols[0];
            const montant = parseFloat((cols[1] || '').replace(/\s/g, ''));
            const mode = cols[2];
            const date = cols[3];
            const origine = cols[4];
            const objectifDose = cols[5] || '';

            // Calculer les totaux par origine
            if (origine === 'Promo 2029') {
				if (!isNaN(montant)) totalPromo2029 += montant;
            } else if (origine === 'Autre') {
				if (!isNaN(montant)) totalAutre += montant;
            }

            // R√©partir par dose
            const contribution = { nom, montant, mode, date };
            
            if (objectifDose === 'Dose 1') {
              totalDose1 += montant;
              contributionsDose1.push(contribution);
            } else if (objectifDose === 'Dose 2') {
              totalDose2 += montant;
              contributionsDose2.push(contribution);
            } else if (objectifDose === 'Dose 3') {
              totalDose3 += montant;
              contributionsDose3.push(contribution);
            }
          }
        });

        // Calculs globaux
        const reste = objectif - totalPromo2029 - totalAutre;
        const pourcentage = Math.min(((totalPromo2029 + totalAutre) / objectif) * 100, 100);

        // Calculs par dose
        const resteDose1 = Math.max(objectifDose1 - totalDose1, 0);
        const resteDose2 = Math.max(objectifDose2 - totalDose2, 0);
        const resteDose3 = Math.max(objectifDose3 - totalDose3, 0);

        // Mise √† jour de l'interface
        document.getElementById('totalRecu').textContent = formatNumber(totalPromo2029) + ' FCFA';
        document.getElementById('totalAutreContrib').textContent = formatNumber(totalAutre) + ' FCFA';
        document.getElementById('reste').textContent = formatNumber(Math.max(reste, 0)) + ' FCFA';

        // Barre de progression
        const bar = document.getElementById('progress-bar');
        bar.style.width = pourcentage + '%';
        bar.textContent = Math.round(pourcentage) + '%';

        // Dose 1
        document.getElementById('totalRecuDose1').textContent = formatNumber(totalDose1) + ' FCFA';
        document.getElementById('resteACollecterDose1').textContent = formatNumber(resteDose1) + ' FCFA';
        document.getElementById('nombreContributeurs1').textContent = contributionsDose1.length;

        // Dose 2
        document.getElementById('totalRecuDose2').textContent = formatNumber(totalDose2) + ' FCFA';
        document.getElementById('resteACollecterDose2').textContent = formatNumber(resteDose2) + ' FCFA';
        document.getElementById('nombreContributeurs2').textContent = contributionsDose2.length;

        // Dose 3
        document.getElementById('totalRecuDose3').textContent = formatNumber(totalDose3) + ' FCFA';
        document.getElementById('resteACollecterDose3').textContent = formatNumber(resteDose3) + ' FCFA';
        document.getElementById('nombreContributeurs3').textContent = contributionsDose3.length;

        // Remplir les tableaux
        fillTable('contributionsDose1', contributionsDose1);
        fillTable('contributionsDose2', contributionsDose2);
        fillTable('contributionsDose3', contributionsDose3);

      } catch (error) {
        console.error('Erreur lors du chargement des donn√©es:', error);
      }
    }

    function fillTable(tableId, contributions) {
      const tbody = document.querySelector(`#${tableId} tbody`);
      tbody.innerHTML = '';

      contributions.forEach((contrib, index) => {
        const tr = document.createElement('tr');
        tr.style.animationDelay = `${index * 0.05}s`;
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${contrib.nom}</td>
          <td>${formatNumber(contrib.montant)} FCFA</td>
          <td>${contrib.mode}</td>
          <td>${contrib.date}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // Charger les donn√©es au d√©marrage
    fetchData();

    // Actualiser toutes les 60 secondes
    setInterval(fetchData, 60000);
  </script>
</body>
</html>
